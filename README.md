
# TBC (Tcl ByteCode) decoder

The .tbc file is generated by Tcl Pro. This repo try to add comments on .tbc file and disassemble .tbc file for human reading.  
test  .tbc file can be found [here](https://github.com/ActiveState/teapot/tree/master/lib/tbcload/tests/tbc10)

## Install

``` shell
go get github.com/corbamico/tbcload/cmd/distclbytecode
```

## Usage

``` shell
Usage: distclbytecode [-h|--help] [file|url]
disassemble tcl bytecode file (usally .tbc file).

Example:
    distclbytecode  test.tbc  #disassemble a file named test.tbc
    distclbytecode  http://127.0.0.1/test.tcl #disassemble from a url

    example url, can be found as https://github.com/ActiveState/teapot/raw/master/lib/tbcload/tests/tbc10/proc.tbc
```

## Code Example

``` go
func ExampleEncode() {
    src := []byte("proc")
    dst := make([]byte, 150)
    length := Encode(dst, src)
    fmt.Printf("%s", dst[:length])
    // Output:
    // ,CHr@
}

func ExampleDecode() {
    r, _ := os.Open(uri)
    p := tbcload.NewParser(r, os.Stdout)
    p.Parse()
}

```

## Reference

- ActiveState Teapot [cmpWrite.c](https://github.com/ActiveState/teapot/blob/master/lib/tclcompiler/cmpWrite.c)

## License

- MIT

- ActiveState/teapot/cmpWrite.c BSD-3 license Copyright (c) 2017,ActiveState Software All rights reserved.
